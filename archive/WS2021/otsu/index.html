<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Blog">
<head>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Project Work 4 – Otsu&#x27;s method </title>
    <link rel="apple-touch-icon" sizes="57x57" href="https://mt2-erlangen.github.io/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://mt2-erlangen.github.io/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://mt2-erlangen.github.io/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://mt2-erlangen.github.io/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://mt2-erlangen.github.io/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://mt2-erlangen.github.io/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://mt2-erlangen.github.io/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://mt2-erlangen.github.io/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://mt2-erlangen.github.io/apple-icon-180x180.png">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="192x192"  href="https://mt2-erlangen.github.io/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://mt2-erlangen.github.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="https://mt2-erlangen.github.io/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://mt2-erlangen.github.io/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" itemprop="about" content="">
    <meta name="keywords" itemprop="keywords" content="">
    <meta itemprop="headline" content="Medizintechnik II – Exercises"/>
    <meta itemprop="educationalUse" content="knowledge share" />
    <meta itemprop="copyrightYear" content="2022" />
    <meta property="og:title" content="Medizintechnik II – Exercises Project Work 4 – Otsu&#x27;s method ">
    <meta property="og:description" content="  ">
    <meta property="og:image" content="">
    <meta property="og:url" content="https:&#x2F;&#x2F;mt2-erlangen.github.io&#x2F;archive&#x2F;WS2021&#x2F;otsu&#x2F;">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:site_name" content="">
    <meta name="twitter:image:alt" content="Project Work 4 – Otsu&#x27;s method">

    <meta property="fb:app_id" content="???" />
    <meta name="twitter:site" content="@???">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600|Source+Code+Pro">
    <link rel="stylesheet" href="/site.css">
</head>

<body>
    <div 
     itemscope itemtype="http://schema.org/Organization">
    </div>

    <header class="header">
        <div class="container">
            <!--<a href="https:&#x2F;&#x2F;mt2-erlangen.github.io&#x2F;" >Anchor Text</a>-->
            <a class="title" href="..">
                    <img src="&#x2F;imgs&#x2F;common&#x2F;joint_logo_small.png" alt="" href="https:&#x2F;&#x2F;mt2-erlangen.github.io&#x2F;">
                    <h1 >Medizintechnik II – Exercises</h1>
            </a>
        </div>
    </header>

    <div class="container padding-header">
        
<article itemscope itemtype="http://schema.org/BlogPosting" class="post post-page">
    
        
    
    <header>
        
        <h1 class="title" itemprop="headline">Project Work 4 – Otsu&#x27;s method</h1>
        <address itemprop="author" itemscope itemtype="https://schema.org/Person">
            <span itemprop="name">Paul Stöwer</span>
        </address>
        <div class="extra">
            

            
        </div>
    </header>
    <div itemprop="articleBody" class="body">
      <h1 id="otsu-s-method">Otsu's method</h1>
<p>In the previous task we implemented a simple segmentation method. However we still need to pass a threshold manually and evaluate it by ourselves.
To conquer that, we will implement Otsu's method in our <code>PostProcessing</code> class:</p>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>
</span><span style="color:#b48ead;">public static int </span><span style="color:#bf616a;">Otsu</span><span>(</span><span style="color:#ebcb8b;">Image</span><span> image)
</span><span>
</span></code></pre>
<h2 id="histogram">Histogram</h2>
<p>The method finds the optimal threshold for bimodal histograms. Therefore we need to add another helper method to our <code>PostProcessing</code> class:</p>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>
</span><span style="color:#b48ead;">public static </span><span style="color:#ebcb8b;">Signal </span><span style="color:#bf616a;">Histogram</span><span>(</span><span style="color:#ebcb8b;">Image</span><span> image)
</span><span>
</span></code></pre>
<p>We can describe the Histogram as a <code>Signal</code> from our Framework with the size of all possible pixel values of a grey scale images. 
<br>Before saving the pixel counts of each pixel value to the histogram, the image needs to be normalized to the grey scale pixel values 0-255. Create a function for that:</p>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>
</span><span style="color:#b48ead;">public static </span><span style="color:#ebcb8b;">Image </span><span style="color:#bf616a;">normalizeToGreyScale</span><span>(</span><span style="color:#ebcb8b;">Image</span><span> image)
</span><span>
</span></code></pre>
<p><br>You can normalize the image with the formula: $I_N=(I-Min)\frac{newMax-newMin}{Max-Min}+newMin$. 
<br> <em>Hint: Make sure that you have integer pixel values!</em></p>
<p>Now you can iterate over your normalized input image and increase the entry of the histogram according to the pixel value of the image. Due to the fact that the histogram is a <code>Signal</code> we can use the <code>show()</code>) method to display it: </p>
<p style="text-align: center;">
<table><tr>
<td> <img src="../MIP.png" alt="MIP.png"  style="width: 256;"/> </td>
<td> <img src="../histogramMIP.png" alt="histogramMIP.png" style="width: 256;"/> </td>
</tr>
<tr>
<th>MIP Image of Volume1</th> 
<th>Histogram of the Image</th> 
</tr>
</table>
 <p>
<h2 id="otsu-s-method-1">Otsu's method</h2>
<p>The method tries to maximize the following function to find the best threshold: $\sigma_b^2(\theta)=P_1(\theta)P_2(\theta)(\mu_1(\theta)-\mu_2(\theta))^2$</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/3/34/Otsu%27s_Method_Visualization.gif" alt="Otsu Visualization" />
<a href="https://upload.wikimedia.org/wikipedia/commons/3/34/Otsu%27s_Method_Visualization.gif">Source</a></p>
<p>Use the following formulas to calculate the different parts of the equation, where $h(i)$ is the normalized histogram:</p>
<ul>
<li>$P_1(\theta)=\sum_{i=0}^\theta h(i)$</li>
<li>$P_2(\theta)= 1-P_1(\theta)=\sum_{i=\theta+1}^{L-1}h(i)$</li>
<li>$\mu_1= \frac{1}{P_1(\theta)}\sum_{i=0}^\theta (i+1)h(i)$</li>
<li>$\mu_2= \frac{1}{P_2(\theta)}\sum_{i=\theta+1}^{L-1}(i+1)h(i)$</li>
</ul>
<p>For the implementation you can orientate yourself at the following steps:</p>
<ul>
<li>Think about the possible values for $\theta$ in an gray scale image</li>
<li>Create the necessary amount of float arrays for the specific size</li>
<li>Calculate $P(\theta)$ and $\mu(\theta)$ according to the formulas</li>
<li>Now calculate $\sigma_b^2$ for the different $\theta$ and save the values in an float array</li>
<li>Find the index of the maximum in $\sigma_b^2$ </li>
</ul>
<p>You have now found the optimal threshold for the input image!</p>
<p>Consider the following points in your report:</p>
<ul>
<li>Describe the method of Otsu: 
<ul>
<li>What is the goal of the method? </li>
<li>How does it solves the problem?
<ul>
<li>Which role does the histogram of the image play?</li>
<li>Describe the method with the formulas</li>
<li>Include at least one segmented picture with the found threshold</li>
</ul>
</li>
</ul>
</li>
<li>Cite the original publication of the method from the year 1979.</li>
</ul>
<p>This section should be half a page to one page long.</p>
<p><a href="../postprocessing">Previous: Post-Processing</a></p>
<p><a href="../evaluation">Next: Statistical Evaluation</a></p>

    </div>
</article>



    </div>

    <div class="footer">
    Last site update:  2025-06-10 13:04
    </div>

</body>
</html>
